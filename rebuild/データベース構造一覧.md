# 病院システム データベース構造一覧

## データベース概要

- **データベース名**: hosplistdb
- **文字コード**: utf8mb4
- **エンジン**: InnoDB
- **用途**: 病院・医療機関管理システム

## テーブル構造一覧

### 1. 医療機関基本情報系

#### `main` テーブル（医療機関メイン情報）
医療機関の基本情報を格納するメインテーブル

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| hos_cd | varchar(10) | 医療機関コード（主キー） |
| hos_name | varchar(100) | 医療機関名 |
| hos_div | varchar(5) | 病院区分 |
| op_flg | int(11) | 閉院フラグ |
| zipcode | varchar(7) | 郵便番号 |
| ad | varchar(400) | 住所 |
| tel | varchar(20) | 電話番号 |
| fax | varchar(20) | FAX番号 |
| email | varchar(254) | メールアドレス |
| are_cd | int(11) | 地区コード |
| pre | varchar(10) | 都道府県名 |
| area | varchar(40) | 地域 |
| city | varchar(40) | 市 |
| zone | varchar(40) | 区 |
| town | varchar(40) | 町 |
| str_num | varchar(200) | 番地 |
| note | varchar(1000) | 備考1 基本情報 |
| clo_day | varchar(20) | 閉院日 |
| **理事長情報** | | |
| chi_name | varchar(60) | 理事長氏名 |
| chi_spe | varchar(20) | 理事長専門 |
| chi_year | varchar(7) | 理事長卒業年度 |
| chi_sch | varchar(50) | 理事長出身校 |
| chi_note | varchar(100) | 理事長備考 |
| **病院長情報** | | |
| pre_name | varchar(60) | 病院長_氏名 |
| pre_spe | varchar(20) | 病院長_専門 |
| pre_year | varchar(7) | 病院長_卒業年度 |
| pre_sch | varchar(50) | 病院長_出身校 |
| pre_note | varchar(100) | 病院長_備考 |
| **診療時間** | | |
| con_hour | varchar(200) | 診療時間 |
| mon_am | varchar(5) | 診療日_月AM |
| mon_pm | varchar(5) | 診療日_月PM |
| tue_am | varchar(5) | 診療日_火AM |
| tue_pm | varchar(5) | 診療日_火PM |
| wed_am | varchar(5) | 診療日_水AM |
| wed_pm | varchar(5) | 診療日_水PM |
| thr_am | varchar(5) | 診療日_木AM |
| thr_pm | varchar(5) | 診療日_木PM |
| fri_am | varchar(5) | 診療日_金AM |
| fri_pm | varchar(5) | 診療日_金PM |
| sat_am | varchar(5) | 診療日_土AM |
| sat_pm | varchar(5) | 診療日_土PM |
| sun_am | varchar(5) | 診療日_日AM |
| sun_pm | varchar(5) | 診療日_日PM |
| holiday | varchar(5) | 診療日_祝日 |
| **診療科フラグ（大分類）** | | |
| int_med | varchar(3) | 内科系 |
| ped_med | varchar(3) | 小児科系 |
| sur_med | varchar(3) | 外科系 |
| ort_med | varchar(3) | 整形外科系 |
| oph_med | varchar(3) | 眼科系 |
| ent_med | varchar(3) | 耳鼻咽喉科系 |
| so_med | varchar(3) | 皮膚科・泌尿器科系 |
| gyn_med | varchar(3) | 産婦人科系 |
| psy_med | varchar(3) | 精神科系 |
| den_med | varchar(3) | 歯科系 |
| etc_med | varchar(3) | その他 |
| **診療科フラグ（詳細）** | | |
| int_int | varchar(3) | 内科系_内科 |
| int_dig | varchar(3) | 内科系_消化器内科 |
| int_uri | varchar(3) | 内科系_糖尿病内科 |
| int_tum | varchar(3) | 内科系_臨床腫瘍科 |
| int_res | varchar(3) | 内科系_呼吸器内科 |
| int_kid | varchar(3) | 内科系_腎臓内科 |
| int_blo | varchar(3) | 内科系_血液内科 |
| int_apo | varchar(3) | 内科系_脳卒中科 |
| int_cir | varchar(3) | 内科系_循環器内科 |
| int_ner | varchar(3) | 内科系_神経内科 |
| int_inf | varchar(3) | 内科系_感染症内科 |
| ped_ped | varchar(3) | 小児科系_小児科 |
| ped_sur | varchar(3) | 小児科系_小児外科 |
| ped_neo | varchar(3) | 小児科系_新生児科 |
| sur_sur | varchar(3) | 外科系_外科 |
| sur_lac | varchar(3) | 外科系_乳腺外科 |
| sur_ner | varchar(3) | 外科系_脳神経外科 |
| sur_nes | varchar(3) | 外科系_呼吸器外科 |
| sur_dig | varchar(3) | 外科系_消化器外科 |
| sur_car | varchar(3) | 外科系_循環器外科 |
| sur_ven | varchar(3) | 外科系_肛門外科 |
| ort_rhe | varchar(3) | 整形外科系_リウマチ科 |
| ort_cos | varchar(3) | 整形外科系_美容外科 |
| ort_ort | varchar(3) | 整形外科系_整形外科 |
| ort_reh | varchar(3) | 整形外科系_リハビリテーション科 |
| ort_pla | varchar(3) | 整形外科系_形成外科 |
| oph_oph | varchar(3) | 眼科系_眼科 |
| ent_ent | varchar(3) | 耳鼻咽喉科系_耳鼻咽喉科 |
| ent_to | varchar(3) | 耳鼻咽喉科系_気管食道科 |
| so_sky | varchar(3) | 皮膚科・泌尿器科系_皮膚科 |
| so_org | varchar(3) | 皮膚科・泌尿器科系_泌尿器科系 |
| gyn_gyn | varchar(3) | 産婦人科系_産婦人科 |
| gyn_obs | varchar(3) | 産婦人科系_産科 |
| gyn_gyne | varchar(3) | 産婦人科系_婦人科 |
| psy_psy | varchar(3) | 精神科系_精神科 |
| psy_psyc | varchar(3) | 精神科系_心療内科 |
| den_den | varchar(3) | 歯科系_歯科 |
| den_cav | varchar(3) | 歯科系_歯科口腔外科 |
| den_ref | varchar(3) | 歯科系_矯正歯科 |
| den_ped | varchar(3) | 歯科系_小児歯科 |
| alle | varchar(3) | その他_アレルギー科 |
| pat | varchar(3) | その他_病理診断科 |
| ・・・（その他多数の診療科フラグ） | | |

**特徴**: 医療機関の基本情報と診療科情報を1つのテーブルに集約。100以上のフィールドを持つ巨大テーブル。

#### `medcare` テーブル（診療内容）
医療機関の具体的な診療内容を格納

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| hos_cd | varchar(10) | 医療機関コード（主キー） |
| med_1 | int(11) | 診療内容1（具体的内容は別途定義） |
| med_2 | int(11) | 診療内容2 |
| med_3 | int(11) | 診療内容3 |
| ・・・ | ・・・ | ・・・ |
| med_164 | int(11) | 診療内容164 |
| med_note | text | 診療内容備考 |

**特徴**: med_1からmed_164まで164個のフィールドを持つ。各フィールドが何を表すかはコードでは不明。最後にmed_noteで備考情報を格納。

#### `area` テーブル（地域マスタ）
地域情報を管理するマスタテーブル

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| sec_cd | int(11) | 地区コード（主キー） |
| are_cd | int(11) | 二次医療圏CD |
| area_name | varchar(20) | 二次医療圏 |
| area1 | varchar(50) | 検索用_地域名 |
| area2 | varchar(50) | 詳細・新規用_地域名 |
| city | varchar(30) | 市 |
| zone | varchar(20) | 区 |
| town | varchar(30) | 町 |

**データ例**:
- 岡山市北区、中区、東区、南区
- 倉敷市、津山市、玉野市など
- 二次医療圏: 県南東部、県南西部、津山･英田、高梁･新見、真庭

### 2. 外部連携・接続系

#### `carna_connect` テーブル（カルナコネクト）
外部システム（カルナコネクト）との連携情報

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| hos_cd | varchar(10) | 医療機関コード（主キー） |
| delete_flg | int(11) | 削除フラグ（デフォルト:0） |

**データ件数**: 約177件

### 3. 問い合わせ・連絡系

#### `contact` テーブル（問い合わせ履歴）
医療機関との問い合わせ履歴を記録

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| con_cd | int(11) | 問い合わせコード（主キー・自動増分） |
| hos_cd | varchar(10) | 医療機関コード |
| hos_name | varchar(100) | 医療機関名 |
| year | year(4) | 年度 |
| ins | int(11) | 施設区分（0:附属病院, 1:総合医療センター） |
| date | date | 日付 |
| method | varchar(50) | 方法（来院、訪問、オンライン等） |
| ex_dept | varchar(50) | 連携機関対応者部署 |
| ex_position | varchar(50) | 連携機関対応者役職 |
| ex_name | varchar(10) | 連携機関対応者氏名 |
| ex_subnames | varchar(100) | 連携機関対応人数・氏名 |
| in_dept | varchar(50) | 当院対応者所属 |
| in_name | varchar(10) | 当院対応者氏名 |
| in_subnames | varchar(100) | 当院対応人数・氏名 |
| detail | varchar(100) | 内容 |
| con_note | varchar(100) | 備考 |
| data_dept | varchar(50) | データ作成部署 |

#### `contact_backup` テーブル（問い合わせ履歴バックアップ）
contactテーブルのバックアップ

### 4. システム管理・ログ系

#### `delete_log` テーブル（削除ログ）
データ削除操作のログを記録

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| hos_cd | varchar(10) | 医療機関コード（複合主キー） |
| hos_name | varchar(100) | 医療機関名 |
| log_data | varchar(100) | 更新（削除）日時（複合主キー） |
| user_name | varchar(50) | 更新者氏名 |
| user_id | varchar(10) | 更新者ID |
| ins | varchar(10) | 更新者施設 |
| bel | varchar(30) | 更新者所属 |
| adm_user | varchar(2) | 管理者フラグ（管理者なら1） |

#### `insert_log` テーブル（挿入ログ）  
データ挿入操作のログを記録

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| hos_cd | varchar(10) | 医療機関コード（複合主キー） |
| hos_name | varchar(100) | 医療機関名 |
| log_data | varchar(100) | 更新日時（複合主キー） |
| user_name | varchar(50) | 更新者氏名 |
| user_id | varchar(10) | 更新者ID |
| ins | varchar(10) | 更新者施設 |
| bel | varchar(30) | 更新者所属 |
| adm_user | varchar(2) | 管理者フラグ（管理者なら1） |

#### `log_msg` テーブル（メッセージログ）
システムメッセージのログを記録

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| module | varchar(50) | 機能名（複合主キー） |
| action | varchar(50) | 操作内容・イベント名（複合主キー） |
| message | varchar(50) | 詳細 |

#### `message` テーブル（メッセージ）
システム内メッセージを管理

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| id | int(11) | 主キー（自動増分） |
| situation | int(11) | 対応状況 |
| req_date | date | 依頼日 |
| res_date | date | 対応日 |
| comment | text | 内容 |
| req_fac | text | 依頼者施設 |
| req_dep | text | 依頼者所属 |
| view | int(11) | 表示・非表示フラグ |
| version | varchar(50) | 医療機関システムのバージョン |

#### `message_old` テーブル（旧メッセージ）
過去のメッセージデータを保管

### 5. メンテナンス・管理系

#### `maintenance` テーブル（メンテナンス）
システムメンテナンス情報を管理

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| id | int(11) | 主キー（自動増分） |
| title | text | タイトル |
| upload_date | date | アップロード日 |
| date | date | 作業日 |
| start_time | time | 予定作業開始時刻 |
| end_time | time | 予定作業終了時刻 |
| comment | text | 実施内容 |
| view | int(11) | 表示・非表示フラグ |

#### `maintenance_start` テーブル（メンテナンス開始）
メンテナンス開始情報を記録

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| id | int(255) | 主キー（自動増分） |
| title | text | 通知タイトル |
| comment | text | 通知タイトル2 |
| date | date | 作業日 |
| start_time | time | 作業開始時刻 |
| end_time | time | 作業終了時刻 |
| comment2 | text | 実施内容 |
| view | int(11) | 表示・非表示フラグ |

#### `department` テーブル（部署）
組織・部署情報を管理

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| sec_cd | int(11) | 診療科分類コード |
| sec_name | varchar(10) | 診療科分類名 |
| dep_cd | varchar(30) | 診療科コード |
| dep_name | varchar(30) | 診療科名 |

#### `user` テーブル（ユーザー）
システム利用ユーザーの情報を管理

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| user_id | varchar(10) | ユーザーID（主キー） |
| user_name | varchar(50) | 氏名 |
| ins | varchar(10) | 施設 |
| bel | varchar(30) | 所属 |
| pw | varchar(255) | パスワード（ハッシュ化） |
| adm_user | int(11) | 権限 |
| edi_user | int(11) | 編集権限 |
| start | varchar(30) | 利用開始日 |
| end | varchar(30) | 利用停止日 |
| onf | int(11) | 更新日フラグ |
| up_date | varchar(1000) | 削除フラグ |

### 6. マスタ・設定系

#### `medcare_mst` テーブル（診療内容マスタ）
medcareテーブルのmed_1～med_164の内容定義

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| med_code | int(11) | 診療内容コード（主キー、1-164） |
| med_div | varchar(50) | 診療区分（全般、内科系、外科系等） |
| med_dep | varchar(100) | 診療部門（各種治療、在宅診療内容、各種検査等） |
| med_det | varchar(300) | 診療内容詳細 |

#### `med_ass` テーブル（医師会）
医師会情報を管理

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| sec_cd | int(11) | 区分コード |
| are_cd | int(11) | 地域コード |
| sec_medarea | varchar(10) | 二次医療圏 |
| med_ass | varchar(10) | 医師会名 |

#### `field_junction` テーブル（フィールド連携）
フィールド間の関連性を定義

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| fie_cd | int(11) | フィールドコード（主キー・自動増分） |
| hos_cd | varchar(10) | 医療機関コード |
| hos_name | varchar(100) | 医療機関名 |
| fie_div | varchar(15) | 区分 |
| fie_name | varchar(30) | 部門名 |
| tel | varchar(20) | 電話番号 |
| fax | varchar(20) | FAX番号 |
| note | varchar(200) | 備考 |
| delete_flg | int(11) | 削除フラグ |

#### `q_a` テーブル（Q&A）
よくある質問と回答を管理

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| que_id | int(11) | 管理番号（主キー・自動増分） |
| order_date | date | 依頼日 |
| r_staff_num | varchar(10) | 依頼者の職員番号 |
| content | varchar(255) | お問い合わせ内容 |
| req_image | varchar(255) | 依頼者から送られてくる画像 |
| advisability | int(11) | 対応可否 |
| supp_status | int(11) | 対応状況 |
| answer | varchar(255) | お問い合わせに対する回答 |
| ans_image | varchar(50) | 回答者からの画像 |
| ans_date | date | 回答日 |
| a_staff_num | varchar(10) | 回答者の職員番号 |
| supp_date | date | 対応日 |
| emerg | int(2) | 緊急フラグ |
| trash_flg | int(11) | 削除フラグ |

#### `relative` テーブル（関連情報）
医療機関の関連情報を管理

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| rel_cd | int(11) | 関連コード（主キー・自動増分） |
| hos_cd | varchar(10) | 医療機関コード |
| name | varchar(60) | 氏名 |
| conn | varchar(15) | 続柄 |
| sch_name | varchar(100) | 学校名 |
| ent_year | year(4) | 入学年度 |
| gra_year | year(4) | 卒業年度 |
| note | varchar(200) | 親族情報備考 |
| delete_flg | int(11) | 削除フラグ |

#### `social_meeting` テーブル（社会的会合）
医療機関関連の会合・イベント情報を管理

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| hos_cd | varchar(10) | 医療機関コード（複合主キー） |
| ins | int(11) | 施設区分（複合主キー、0:附属病院, 1:総合医療センター） |
| year | varchar(4) | 参加年度（複合主キー） |
| delete_flg | int(11) | 削除フラグ |

### 7. 導入・研修系

#### `intro` テーブル（導入情報）
システム導入情報を記録

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| hos_cd | varchar(10) | 医療機関コード（複合主キー） |
| ins | int(11) | 施設区分（複合主キー、0:附属病院, 1:総合医療センター） |
| year | year(4) | 年度（複合主キー） |
| date | date | 診療日（複合主キー） |
| fie_name | varchar(30) | 診療科（複合主キー） |
| fie_cd | int(11) | 診療科コード |
| intr | int(11) | 紹介件数 |

#### `intro_backup` テーブル（導入情報バックアップ）
導入情報のバックアップ

#### `invers_intro` テーブル（逆引き導入情報）
導入情報の逆引き参照用

#### `invers_intro_backup` テーブル（逆引き導入情報バックアップ）
逆引き導入情報のバックアップ

#### `c_path` テーブル（パス情報）
システムパス情報を管理

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| hos_cd | varchar(10) | 医療機関コード（複合主キー） |
| ins | int(11) | 施設区分（複合主キー、0:附属病院, 1:総合医療センター） |
| cp0 | int(11) | 入退院支援連携先病院フラグ |
| cp1 | int(11) | 脳卒中パスフラグ |
| cp2 | int(11) | 大腿骨パスフラグ |
| cp3 | int(11) | 心筋梗塞・心不全パスフラグ |
| cp4 | int(11) | 胃がんパスフラグ |
| cp5 | int(11) | 大腸がんパスフラグ |
| cp6 | int(11) | 乳がんパスフラグ |
| cp7 | int(11) | 肺がんパスフラグ |
| cp8 | int(11) | 肝がんパスフラグ |
| delete_flg | int(11) | 削除フラグ |

#### `training` テーブル（研修情報）
医療機関向け研修情報を記録

| フィールド名 | データ型 | 説明 |
|-------------|----------|------|
| hos_cd | varchar(10) | 医療機関コード（複合主キー） |
| year | year(4) | 年度（複合主キー） |
| ins | int(11) | 施設区分（複合主キー、0:附属病院, 1:総合医療センター） |
| tra_name | varchar(200) | 研修先医療機関名（複合主キー） |
| tra_div | varchar(20) | 区分（複合主キー） |
| dep | varchar(60) | 診療科（複合主キー） |
| name | varchar(60) | 氏名（複合主キー） |
| start | date | 診療支援開始日（複合主キー） |
| end | date | 診療支援終了日（複合主キー） |
| date | varchar(300) | 日付（複合主キー） |
| dia_div | varchar(50) | 診療支援区分（複合主キー） |
| occ_turn | int(11) | 役職順（複合主キー） |
| occ | varchar(30) | 職名 |

#### `training_backup` テーブル（研修情報バックアップ）
研修情報のバックアップ

#### `training_old` テーブル（旧研修情報）
過去の研修情報を保管

## データベース設計の特徴

### 1. 大型テーブル中心設計
- **mainテーブル**: 100以上のフィールドを持つ巨大テーブル
- **medcareテーブル**: 164個の数値フィールド + 備考フィールドを持つ

### 2. フラット構造
- 診療科情報をフラグで管理（int_med, sur_med等）
- 診療内容を番号付きフィールドで管理（med_1～med_164）

### 3. バックアップテーブルの存在
- 複数のテーブルにバックアップ版が存在
- データの履歴管理や復旧用途と推測

### 4. ログテーブルの充実
- 削除ログ、挿入ログ、メッセージログなど
- 操作の追跡が可能な設計

### 5. 地域情報の詳細管理
- 二次医療圏による地域分類
- 岡山県を中心とした広域管理（広島県も含む）

## 推定されるシステム規模

- **医療機関数**: 数千件規模
- **地域**: 岡山県全域 + 広島県の一部
- **カルナコネクト連携**: 177機関
- **診療内容項目**: 164種類
- **診療科**: 50以上の詳細分類

このデータベース構造は、医療機関の包括的な情報管理を目的としており、基本情報から診療内容、地域情報、外部連携まで幅広くカバーしています。
